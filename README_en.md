* This document is generated by AI for reference only
* If it does not match the actual situation, please refer to the actual situation

## About Bug

- When the number of windows is large, there will be flickering, the reason is unknown

# GMUX - OpenComputers Multi-tasking Desktop Environment

An advanced multi-tasking desktop environment system designed for Minecraft OpenComputers mod, providing a modern operating system-like multi-tasking experience for OpenComputers through component virtualization, process isolation, and window management.

## ✨ Project Highlights

GMUX breaks the traditional single-task limitation of OpenComputers, enabling true multi-process concurrent execution:

- 🖥️ **Windowed Desktop Environment** - GUI interface similar to modern operating systems
- ⚡ **True Multi-tasking** - Multiple programs running simultaneously without interference  
- 🔒 **Process Isolation Mechanism** - Each process has independent virtual component space
- 🎯 **Efficient Resource Management** - Intelligent CPU time slice allocation and memory management

## 🚀 Core Features

### 1. Multi-Process System
- **Concurrent Execution**: Support for multiple Lua programs running simultaneously
- **State Management**: Real-time monitoring of process states (running/waiting/error/dead)
- **Resource Isolation**: Each process has independent memory space and execution environment
- **Intelligent Scheduling**: Efficient event-driven process scheduling algorithm

### 2. Windowed GUI Interface
- **Window Management**: Create, move, resize, minimize, maximize windows
- **Focus Control**: Intelligent window focus management and event distribution
- **Real-time Status**: Window title bar displays real-time process status
- **Drag Operations**: Support for window dragging and position adjustment

### 3. Virtual Component System  
- **GPU Virtualization**: Each process gets independent GPU access privileges
- **Keyboard Isolation**: Keyboard events accurately distributed to corresponding processes
- **Screen Buffering**: Independent screen buffers prevent display conflicts
- **Component Proxy**: Transparent component access proxy mechanism

### 4. Desktop Application Ecosystem
- **Shell Terminal**: Fully functional command-line environment
- **Program Launcher**: Graphical program startup and management tool
- **System Monitor**: Real-time display of CPU usage and process information
- **Extension Support**: Easy development and integration of new desktop applications

## 📦 Quick Start

### Download and Installation

1. **Get Source Code**
   ```bash
   # Download in OpenComputers
   wget https://github.com/your-repo/gmux/archive/main.zip
   # Or clone repository
   git clone https://github.com/your-repo/gmux.git
   ```

2. **Deploy Files**
   ```bash
   # Copy all files to OpenComputers root directory
   cp -r gmux/* /
   ```

### Launch and Usage

1. **Start GMUX**
   ```lua
   -- Run in OpenComputers
   lua /gmux.lua
   ```

2. **Basic Operations**
   - Click desktop icons to launch applications
   - Drag window title bars to move windows
   - Click window buttons for minimize/maximize/close operations
   - Use mouse to switch focus between different windows

3. **Launch Shell**
   - Click "Shell" icon to open terminal
   - Run any OpenComputers program in the terminal
   - Programs will run in independent windows without affecting other processes

## 💻 System Requirements

### OpenComputers Environment
- **OpenComputers Version**: 1.7.5+
- **Minecraft Version**: 1.12.2+ (recommended)
- **Lua Version**: 5.3+ (built-in OpenComputers)

### Hardware Configuration Recommendations
- **Memory**: At least 3.5MB memory sticks (4MB+ recommended)
- **CPU**: T2 and above processor (multi-threading support)
- **Graphics Card**: T2 and above graphics card (multi-buffer support)
- **Screen**: T2 and above screen (160x50 resolution recommended)

### Dependency Components
```lua
-- Required components
component.gpu      -- Graphics Processing Unit
component.screen   -- Display Screen  
component.keyboard -- Keyboard Input
computer           -- Computer Core

-- Optional components
component.ocelot   -- Logging (if available)
```

## 🏗️ Architecture Overview

GMUX adopts a layered architecture design to ensure system stability and scalability:

### System Architecture Diagram
```
┌─────────────────────────────────────┐
│           Frontend Layer            │  <- User Interface Layer
│  ┌─────────┐ ┌─────────┐ ┌─────────┐ │
│  │Desktop  │ │Windows  │ │ Items   │ │
│  │Manager  │ │Manager  │ │ Apps    │ │
│  └─────────┘ └─────────┘ └─────────┘ │
└─────────────────────────────────────┘
           │           │           │
┌─────────────────────────────────────┐
│            Backend Layer            │  <- System Core Layer
│  ┌─────────┐ ┌─────────┐ ┌─────────┐ │
│  │Process  │ │Virtual  │ │ Patch   │ │
│  │Manager  │ │Component│ │ System  │ │
│  └─────────┘ └─────────┘ └─────────┘ │
└─────────────────────────────────────┘
           │           │           │
┌─────────────────────────────────────┐
│         OpenComputers API           │  <- Low-level Interface Layer
│     computer │ component │ event     │
└─────────────────────────────────────┘
```

### Core Module Description

**Backend Core**
- `core.lua`: System initialization and main event loop
- `process.lua`: Process creation, scheduling and lifecycle management
- `patch.lua`: OpenComputers API enhancement and modification
- `virtual_components/`: Virtual component implementation

**Frontend Interface**  
- `main.lua`: Frontend entry point and event handling
- `desktop.lua`: Desktop environment and window manager
- `api.lua`: Frontend API interface
- `items/`: Desktop applications

### Data Flow Description
1. **Event Input**: Hardware events → Patch system → Virtual components → Target process
2. **Display Output**: Process rendering → Virtual GPU → Window manager → Physical screen
3. **Process Communication**: Process A → Event system → Process B (through signal mechanism)

## 📁 Project Structure

```
gmux/
├── gmux.lua                 # Main entry file
├── bin/
│   └── start.lua           # Launch script
├── backend/                # Backend system core
│   ├── config.lua          # System configuration
│   ├── core.lua            # Core manager
│   ├── patch.lua           # API patch system
│   ├── process.lua         # Process manager
│   ├── patchs/             # API patch implementations
│   │   ├── 01_computer.lua # Computer API enhancement
│   │   ├── 02_event.lua    # Event system enhancement
│   │   ├── 03_component.lua# Component virtualization
│   │   ├── 04_thread.lua   # Thread support
│   │   ├── 40_keyboard.lua # Keyboard virtualization
│   │   ├── 50_tty.lua      # TTY terminal support
│   │   ├── 51_core_cursor.lua # Cursor management
│   │   ├── 52_term.lua     # Terminal enhancement
│   │   ├── 60_io.lua       # IO system enhancement
│   │   ├── 91_gpu.lua      # GPU virtualization
│   │   ├── 92_keyboard.lua # Keyboard event handling
│   │   └── 93_term.lua     # Terminal display enhancement
│   └── virtual_components/ # Virtual component implementation
│       ├── api.lua         # Virtual component API
│       ├── gpu.lua         # Virtual GPU implementation
│       ├── keyboard.lua    # Virtual keyboard implementation
│       └── screen.lua      # Virtual screen implementation
├── frontend/               # Frontend user interface
│   ├── main.lua           # Frontend main program
│   ├── config.lua         # Frontend configuration
│   ├── desktop.lua        # Desktop manager
│   ├── api.lua            # Frontend API interface
│   └── items/             # Desktop applications
│       ├── monitor.lua    # System monitor
│       ├── run.lua        # Program launcher
│       └── shell.lua      # Shell terminal
└── README.md              # Project documentation
```

## 🔧 Development Information

### Contribution Guidelines

Welcome to contribute code to the GMUX project! Please follow these steps:

1. **Fork the repository** and create a feature branch
2. **Follow coding standards**:
   - Use 4-space indentation
   - Use underscore naming convention for functions and variables
   - Add necessary comments and documentation

3. **Test your changes**:
   ```lua
   -- Ensure testing in OpenComputers environment
   lua /gmux.lua
   ```

4. **Submit a Pull Request** with detailed description of your changes

### Development Environment Setup

1. **Prepare OpenComputers testing environment**
   - Install Minecraft 1.12.2+
   - Install OpenComputers mod
   - Create a computer with sufficient memory

2. **Recommended development tools**
   - Code editor: VS Code + Lua extension
   - Version control: Git
   - Testing environment: OpenComputers emulator (optional)

### API Extension Development

Creating new desktop applications:

```lua
-- frontend/items/your_app.lua
return {
    name = "Your App",
    action = function()
        local api = require("frontend/api")
        local result = api.create_graphics_process({
            gpu = component.gpu,
            width = 80, height = 25,
            main_path = "/your/app/path.lua",
        })
        api.create_window({
            source = result,
            process = result.process,
            title = "Your App Title",
            event_handler = result,
            gpu = component.gpu,
            x = 5, y = 5
        })
    end
}
```

### Known Limitations

- Number of concurrent processes is limited by OpenComputers memory constraints
- Some OpenComputers programs may need adaptation to run properly in windows
- High-frequency screen updates may affect performance

## 📄 License

This project is released under the **MIT License**.

---

### Acknowledgments

Thanks to the developers of the OpenComputers mod for bringing powerful computer simulation functionality to Minecraft, making this project possible.

**Let's bring a better multi-tasking experience to OpenComputers together!** 🚀 