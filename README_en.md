* This document is generated by AI for reference only
* If it does not match the actual situation, please refer to the actual situation

## About Bug

- When the number of windows is large, there will be flickering, the reason is unknown

# GMUX - OpenComputers Multi-tasking Desktop Environment

An advanced multi-tasking desktop environment system designed for Minecraft OpenComputers mod, providing a modern operating system-like multi-tasking experience for OpenComputers through component virtualization, process isolation, and window management.

## âœ¨ Project Highlights

GMUX breaks the traditional single-task limitation of OpenComputers, enabling true multi-process concurrent execution:

- ğŸ–¥ï¸ **Windowed Desktop Environment** - GUI interface similar to modern operating systems
- âš¡ **True Multi-tasking** - Multiple programs running simultaneously without interference  
- ğŸ”’ **Process Isolation Mechanism** - Each process has independent virtual component space
- ğŸ¯ **Efficient Resource Management** - Intelligent CPU time slice allocation and memory management

## ğŸš€ Core Features

### 1. Multi-Process System
- **Concurrent Execution**: Support for multiple Lua programs running simultaneously
- **State Management**: Real-time monitoring of process states (running/waiting/error/dead)
- **Resource Isolation**: Each process has independent memory space and execution environment
- **Intelligent Scheduling**: Efficient event-driven process scheduling algorithm

### 2. Windowed GUI Interface
- **Window Management**: Create, move, resize, minimize, maximize windows
- **Focus Control**: Intelligent window focus management and event distribution
- **Real-time Status**: Window title bar displays real-time process status
- **Drag Operations**: Support for window dragging and position adjustment

### 3. Virtual Component System  
- **GPU Virtualization**: Each process gets independent GPU access privileges
- **Keyboard Isolation**: Keyboard events accurately distributed to corresponding processes
- **Screen Buffering**: Independent screen buffers prevent display conflicts
- **Component Proxy**: Transparent component access proxy mechanism

### 4. Desktop Application Ecosystem
- **Shell Terminal**: Fully functional command-line environment
- **Program Launcher**: Graphical program startup and management tool
- **System Monitor**: Real-time display of CPU usage and process information
- **Extension Support**: Easy development and integration of new desktop applications

## ğŸ“¦ Quick Start

### Download and Installation

1. **Get Source Code**
   ```bash
   # Download in OpenComputers
   wget https://github.com/your-repo/gmux/archive/main.zip
   # Or clone repository
   git clone https://github.com/your-repo/gmux.git
   ```

2. **Deploy Files**
   ```bash
   # Copy all files to OpenComputers root directory
   cp -r gmux/* /
   ```

### Launch and Usage

1. **Start GMUX**
   ```lua
   -- Run in OpenComputers
   lua /gmux.lua
   ```

2. **Basic Operations**
   - Click desktop icons to launch applications
   - Drag window title bars to move windows
   - Click window buttons for minimize/maximize/close operations
   - Use mouse to switch focus between different windows

3. **Launch Shell**
   - Click "Shell" icon to open terminal
   - Run any OpenComputers program in the terminal
   - Programs will run in independent windows without affecting other processes

## ğŸ’» System Requirements

### OpenComputers Environment
- **OpenComputers Version**: 1.7.5+
- **Minecraft Version**: 1.12.2+ (recommended)
- **Lua Version**: 5.3+ (built-in OpenComputers)

### Hardware Configuration Recommendations
- **Memory**: At least 3.5MB memory sticks (4MB+ recommended)
- **CPU**: T2 and above processor (multi-threading support)
- **Graphics Card**: T2 and above graphics card (multi-buffer support)
- **Screen**: T2 and above screen (160x50 resolution recommended)

### Dependency Components
```lua
-- Required components
component.gpu      -- Graphics Processing Unit
component.screen   -- Display Screen  
component.keyboard -- Keyboard Input
computer           -- Computer Core

-- Optional components
component.ocelot   -- Logging (if available)
```

## ğŸ—ï¸ Architecture Overview

GMUX adopts a layered architecture design to ensure system stability and scalability:

### System Architecture Diagram
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           Frontend Layer            â”‚  <- User Interface Layer
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚Desktop  â”‚ â”‚Windows  â”‚ â”‚ Items   â”‚ â”‚
â”‚  â”‚Manager  â”‚ â”‚Manager  â”‚ â”‚ Apps    â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚           â”‚           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            Backend Layer            â”‚  <- System Core Layer
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚Process  â”‚ â”‚Virtual  â”‚ â”‚ Patch   â”‚ â”‚
â”‚  â”‚Manager  â”‚ â”‚Componentâ”‚ â”‚ System  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚           â”‚           â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         OpenComputers API           â”‚  <- Low-level Interface Layer
â”‚     computer â”‚ component â”‚ event     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Core Module Description

**Backend Core**
- `core.lua`: System initialization and main event loop
- `process.lua`: Process creation, scheduling and lifecycle management
- `patch.lua`: OpenComputers API enhancement and modification
- `virtual_components/`: Virtual component implementation

**Frontend Interface**  
- `main.lua`: Frontend entry point and event handling
- `desktop.lua`: Desktop environment and window manager
- `api.lua`: Frontend API interface
- `items/`: Desktop applications

### Data Flow Description
1. **Event Input**: Hardware events â†’ Patch system â†’ Virtual components â†’ Target process
2. **Display Output**: Process rendering â†’ Virtual GPU â†’ Window manager â†’ Physical screen
3. **Process Communication**: Process A â†’ Event system â†’ Process B (through signal mechanism)

## ğŸ“ Project Structure

```
gmux/
â”œâ”€â”€ gmux.lua                 # Main entry file
â”œâ”€â”€ bin/
â”‚   â””â”€â”€ start.lua           # Launch script
â”œâ”€â”€ backend/                # Backend system core
â”‚   â”œâ”€â”€ config.lua          # System configuration
â”‚   â”œâ”€â”€ core.lua            # Core manager
â”‚   â”œâ”€â”€ patch.lua           # API patch system
â”‚   â”œâ”€â”€ process.lua         # Process manager
â”‚   â”œâ”€â”€ patchs/             # API patch implementations
â”‚   â”‚   â”œâ”€â”€ 01_computer.lua # Computer API enhancement
â”‚   â”‚   â”œâ”€â”€ 02_event.lua    # Event system enhancement
â”‚   â”‚   â”œâ”€â”€ 03_component.lua# Component virtualization
â”‚   â”‚   â”œâ”€â”€ 04_thread.lua   # Thread support
â”‚   â”‚   â”œâ”€â”€ 40_keyboard.lua # Keyboard virtualization
â”‚   â”‚   â”œâ”€â”€ 50_tty.lua      # TTY terminal support
â”‚   â”‚   â”œâ”€â”€ 51_core_cursor.lua # Cursor management
â”‚   â”‚   â”œâ”€â”€ 52_term.lua     # Terminal enhancement
â”‚   â”‚   â”œâ”€â”€ 60_io.lua       # IO system enhancement
â”‚   â”‚   â”œâ”€â”€ 91_gpu.lua      # GPU virtualization
â”‚   â”‚   â”œâ”€â”€ 92_keyboard.lua # Keyboard event handling
â”‚   â”‚   â””â”€â”€ 93_term.lua     # Terminal display enhancement
â”‚   â””â”€â”€ virtual_components/ # Virtual component implementation
â”‚       â”œâ”€â”€ api.lua         # Virtual component API
â”‚       â”œâ”€â”€ gpu.lua         # Virtual GPU implementation
â”‚       â”œâ”€â”€ keyboard.lua    # Virtual keyboard implementation
â”‚       â””â”€â”€ screen.lua      # Virtual screen implementation
â”œâ”€â”€ frontend/               # Frontend user interface
â”‚   â”œâ”€â”€ main.lua           # Frontend main program
â”‚   â”œâ”€â”€ config.lua         # Frontend configuration
â”‚   â”œâ”€â”€ desktop.lua        # Desktop manager
â”‚   â”œâ”€â”€ api.lua            # Frontend API interface
â”‚   â””â”€â”€ items/             # Desktop applications
â”‚       â”œâ”€â”€ monitor.lua    # System monitor
â”‚       â”œâ”€â”€ run.lua        # Program launcher
â”‚       â””â”€â”€ shell.lua      # Shell terminal
â””â”€â”€ README.md              # Project documentation
```

## ğŸ”§ Development Information

### Contribution Guidelines

Welcome to contribute code to the GMUX project! Please follow these steps:

1. **Fork the repository** and create a feature branch
2. **Follow coding standards**:
   - Use 4-space indentation
   - Use underscore naming convention for functions and variables
   - Add necessary comments and documentation

3. **Test your changes**:
   ```lua
   -- Ensure testing in OpenComputers environment
   lua /gmux.lua
   ```

4. **Submit a Pull Request** with detailed description of your changes

### Development Environment Setup

1. **Prepare OpenComputers testing environment**
   - Install Minecraft 1.12.2+
   - Install OpenComputers mod
   - Create a computer with sufficient memory

2. **Recommended development tools**
   - Code editor: VS Code + Lua extension
   - Version control: Git
   - Testing environment: OpenComputers emulator (optional)

### API Extension Development

Creating new desktop applications:

```lua
-- frontend/items/your_app.lua
return {
    name = "Your App",
    action = function()
        local api = require("frontend/api")
        local result = api.create_graphics_process({
            gpu = component.gpu,
            width = 80, height = 25,
            main_path = "/your/app/path.lua",
        })
        api.create_window({
            source = result,
            process = result.process,
            title = "Your App Title",
            event_handler = result,
            gpu = component.gpu,
            x = 5, y = 5
        })
    end
}
```

### Known Limitations

- Number of concurrent processes is limited by OpenComputers memory constraints
- Some OpenComputers programs may need adaptation to run properly in windows
- High-frequency screen updates may affect performance

## ğŸ“„ License

This project is released under the **MIT License**.

---

### Acknowledgments

Thanks to the developers of the OpenComputers mod for bringing powerful computer simulation functionality to Minecraft, making this project possible.

**Let's bring a better multi-tasking experience to OpenComputers together!** ğŸš€ 